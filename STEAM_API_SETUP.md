# Настройка Steam Web API для получения лайв и предстоящих матчей

## Что такое Steam Web API?

Steam Web API - это официальный API от Valve для получения данных о Dota 2 матчах напрямую из игры. Это тот же API, который используют боты и нейросети для игры в Dota 2!

## Преимущества Steam API

✅ **Официальный источник** - данные напрямую от Valve  
✅ **Бесплатный** - не требует оплаты  
✅ **Лайв данные** - получаем матчи в реальном времени  
✅ **Расписание матчей** - предстоящие матчи из лиг  
✅ **Надежный** - используется миллионами игроков  

## Получение API ключа (ОБЯЗАТЕЛЬНО!)

**ВАЖНО:** Steam API требует API ключ для методов `GetLiveLeagueGames` и `GetLeagueListing`!
Без ключа вы получите ошибку 403 Forbidden.

### Как получить ключ:

1. Перейдите на https://steamcommunity.com/dev/apikey
2. Войдите в свой Steam аккаунт
3. Заполните форму:
   - **Domain Name**: можно указать любой домен (например, `localhost` или `example.com`)
   - **I agree to the Steam Web API Terms of Use**: отметьте галочку
4. Нажмите "Register"
5. Скопируйте ваш API ключ

### Настройка в приложении:

1. Откройте файл `lib/services/steam_api_service.dart`
2. Найдите строку:
   ```dart
   static const String apiKey = '';
   ```
3. **Вставьте ваш ключ:**
   ```dart
   static const String apiKey = 'ваш_ключ_здесь';
   ```

**Без ключа Steam API не будет работать!**

## Используемые методы Steam API

### 1. GetLiveLeagueGames
Получает матчи, которые идут прямо сейчас в профессиональных лигах.

**Endpoint:** `IDOTA2Match_570/GetLiveLeagueGames/v1`

**Что возвращает:**
- ID матча
- Команды (Radiant и Dire)
- Лига
- Текущий статус матча

### 2. GetScheduledLeagueGames
Получает расписание предстоящих матчей из лиг.

**Endpoint:** `IDOTA2Match_570/GetScheduledLeagueGames/v1`

**Параметры:**
- `league_id` (опционально) - ID конкретной лиги
- `date_min` (опционально) - минимальная дата
- `date_max` (опционально) - максимальная дата

**Что возвращает:**
- ID матча
- Команды
- Время начала матча
- Лига

## Как это работает в приложении

Приложение использует многоуровневый подход:

1. **Steam API** (приоритет 1) - официальный источник
2. **Odds API** (приоритет 2) - если Steam недоступен
3. **OpenDota API** (приоритет 3) - резервный метод
4. **Анализ недавних матчей** (приоритет 4) - последний резерв

## Проверка работы

После запуска приложения проверьте консоль:

```
Steam API: Получено X лайв матчей
Steam API: Получено Y предстоящих матчей
```

Если видите эти сообщения - Steam API работает!

## Ограничения

- Steam API может иметь небольшие задержки (обычно 1-2 минуты)
- Не все матчи доступны через публичный API (только профессиональные лиги)
- Для получения данных о всех матчах нужен доступ к лобби (требует партнерства с Valve)

## Альтернативы

Если Steam API не работает, приложение автоматически переключится на:
- OpenDota API для получения данных о матчах из лиг
- Анализ времени начала матчей для определения предстоящих
- Проверка длительности матчей для определения лайв статуса

## Дополнительная информация

- [Steam Web API Documentation](https://steam.com/api/)
- [Dota 2 API Methods](https://wiki.teamfortress.com/wiki/WebAPI#Dota_2)
- [Steam Community API Key](https://steamcommunity.com/dev/apikey)

